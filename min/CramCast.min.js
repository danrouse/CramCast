(function(){function t(e,a,r){this.string=e,this.children=[];var n;if(e&&(this.matches=e.match(a),n=e.split(a)),this.matches||(this.matches=[],n=[e]),r.length>0){var o=r[0],c=r.slice(1);for(var s in n)this.children.push(new t(n[s],o,c))}else this.children=n}function e(){this.regexs=[/[0-9]*\.[0-9]+|[0-9]+/gi,/[ \t\n\r\—]+/gi]}function a(t){_=[];var e=[t];"string"==typeof t&&(e=document.querySelectorAll(t));for(var a=0;a<e.length;a++)e[a].innerText&&e[a].innerText.length&&_.push({text:e[a].innerText,type:e[a].nodeName});for(var n in _){var o=l.lex(_[n].text),c=[],s=0,i="";for(var a in o){var p={};if(p.text=o[a].replace(/^(\W)/,function(t){return p.before=t,""}).replace(/(\W)$/,function(t){return p.after=t,""}),p.text.length||!c[c.length-1]){('"'==p.before||"'"==p.before||"“"==p.before||"("==p.before)&&s++,s&&(p.quote_depth=s),('"'==p.after||"'"==p.after||"”"==p.after||")"==p.after)&&s>0&&s--,d.prepconj.indexOf(p.text.toUpperCase())>-1?p.pos="prepconj":d.detpron.indexOf(p.text.toUpperCase())>-1&&(p.pos="detpron");var m=r(p.text);if(p.pre_ORP=p.text.substring(0,m),p.ORP=p.text.substring(m,m+1),p.post_ORP=p.text.substring(m+1),"string"!=typeof i&&!i.after&&i.text.length+p.text.length<11&&p.pos){var u={text:i.text+String.fromCharCode(160)+p.text},h=r(u.text);u.ORP=u.text.substring(h,h+1),u.pre_ORP=u.text.substring(0,h),u.post_ORP=u.text.substring(h+1),u.after=p.after,u.before=i.before,u.count=(i.count||1)+1,i.pos&&p.pos&&(u.pos=p.pos),p.quote_depth&&(u.quote_depth=p.quote_depth),c[c.length-1]=u,i=u}else c.push(p),i=p}else c[c.length-1].after=p.before}c[c.length-1].last=!0,_[n].words=c}}function r(t){for(var e=Math.max(0,Math.round(t.length/2*.9-1-Math.floor(t.length/6)));!t.substring(e,e+1).match(/\w/)&&e>0;)e--;return e}function n(){var t=(new Date).getTime();if(E+f+y>t||h)return requestAnimFrame(n);f=6e4/(1.1*u),y=0;var e=_[g],a=e.words[b];a.last?f*=4:!a.after||"."!=a.after&&"?"!=a.after?a.after&&(f*=2.25):f*=3,!a.pos||"detpron"!=a.pos&&"prepconj"!=a.pos||(f*=.75),a.pos&&a.count&&a.count>1&&(f*=.75*a.count),v.content.style.fontStyle=a.quote_depth&&a.quote_depth%2?"italic":"inherit",O+=a.count||1,x+=t-E,E=t,o(),++b==e.words.length&&(b=0,++g==_.length&&(g--,b=_[g].words.length-1,s())),requestAnimFrame(n)}function o(){var t=_[g],e=t.words[b],a="<span>",r=Math.round(T[e.ORP]/3);T.m&&T.l&&T.m!=T.l||(c(),r=0),a+=(e.before||"")+e.pre_ORP+'<strong class="ORP" style="margin-right:-'+r+'px">'+e.ORP+'</strong></span><span style="padding-left:'+r+'px">'+(e.post_ORP||String.fromCharCode(160))+(e.after||""),v.content.innerHTML=a+"</span>",_.length>1?(v.progress_total.parentNode.style.display="block",v.progress_total_inner.style.width=Math.round((g+1)/_.length*1e4)/100+"%",v.progress_total_text.innerHTML=Math.round(g/_.length*100)+"%"):v.progress_total.parentNode.style.display="none",v.progress_section_inner.style.width=Math.round((b+1)/_[g].words.length*1e4)/100+"%",v.actual_wpm.innerHTML=Math.round(O/(x/6e4)*10)/10+" WPM"}function c(){for(var t=0;t<w.length;t++){var e=document.createElement("p");e.setAttribute("id","_cramcast_font_test"),e.innerHTML=w[t],v.body.appendChild(e),T[w[t]]=e.clientWidth,v.body.removeChild(e)}}function s(){h=!0,v.button_playpause.innerHTML=">"}function i(){h=!1,E=(new Date).getTime(),v.button_playpause.innerHTML="||"}t.prototype.fillArray=function(t){for(var e in this.children){var a=this.children[e];if(a.fillArray?a.fillArray(t):/[^ \t\n\r]+/i.test(a)&&t.push(a),e<this.matches.length){var r=this.matches[e];/[^ \t\n\r]+/i.test(r)&&t.push(r)}}},t.prototype.toString=function(){var t=[];return this.fillArray(t),t.toString()},e.prototype.lex=function(e){var a=[],r=new t(e,this.regexs[0],this.regexs.slice(1));return r.fillArray(a),a};var l=new e,d={prepconj:"ABOUT ABOVE AFTER ALONG ALTHOUGH AMONG AND AROUND AS AT BEFORE BELOW BENEATH BESIDE BETWEEN BEYOND BUT BY DOWN DURING EXCEPT FOR FROM IF IN INTO NEAR NOR OF OFF ON OR OUT OVER ROUND SINCE SO THAN THAT THOUGH THROUGH TILL TO TOWARDS UNDER UNLESS UNTIL UP WHEREAS WHILE WITH WITHIN WITHOUT".split(" "),detpron:"A ALL AN ANOTHER ANY ANYBODY ANYTHING BOTH EACH EITHER ENOUGH EVERY EVERYBODY EVERYONE EVERYTHING FEW FEWER HE HER HERS HERSELF HIM HIMSELF HIS I IT ITS ITSELF LESS MANY ME MINE MORE MOST MUCH MY MYSELF NEITHER NO NOBODY NONE NOONE NOTHING OTHER OTHERS OUR OURS OURSELVES SHE SOME SOMEBODY SOMEONE SOMETHING SUCH THAT THE THEIR THEIRS THEM THEMSELVES THESE THEY THIS THOSE US WE WHAT WHICH WHO WHOM WHOSE YOU YOUR YOURS YOURSELF YOURSELVES".split(" ")},_=[],p=document.createElement("div"),m='#_cramcast_container{display:none;position:fixed;z-index:9000;left:0;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.75);line-height:100%;font-size:100%;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}#_cramcast_container *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#_cramcast_container p{margin:0}#_cramcast_panel{width:95%;max-width:960px;margin:2.5% auto;background-color:#fff}#_cramcast_panel li,#_cramcast_panel ul{list-style:none;margin:0;padding:0}#_cramcast_panel button{border:0;padding:0;margin:2px;background-color:#fffdd0;color:#000;width:2em;height:2em;text-align:center;vertical-align:middle}#_cramcast_panel button:hover{background-color:#000;color:#fffdd0;cursor:pointer}#_cramcast_panel p{margin:0;vertical-align:middle}#_cramcast_panel select{padding:.2em}._cramcast_bar{text-align:center;height:2em;position:relative;border:2px solid #000;border-bottom-width:0}._cramcast_bar:last-of-type{border-bottom-width:2px}._cramcast_bar p,._cramcast_bar select{display:inline-block}._cramcast_progress{height:100%;padding:2px}._cramcast_progress p{font-size:1.5em;position:absolute;left:4%;top:.5em;color:#fff;text-shadow:1px 1px 0 #000,-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,0 0 3px #000;text-align:left}._cramcast_progress p._cramcast_right{text-align:right;left:auto;right:4%}._cramcast_progress:hover{cursor:pointer}._cramcast_progress_inner{height:100%;background-color:#000;-webkit-transition:width .25s ease-in;transition:width .25s ease-in}._cramcast_body{background-color:#fffdd0;white-space:nowrap;border:2px solid #000;border-bottom-width:0;padding:0 1em}._cramcast_body li,._cramcast_body p{font-size:2em}._cramcast_body li span,._cramcast_body p span{display:inline-block;position:relative;height:3em;padding:1em 0}._cramcast_body li span:nth-child(1),._cramcast_body p span:nth-child(1){width:40%;text-align:right}._cramcast_body li span:nth-child(1):after,._cramcast_body li span:nth-child(1):before,._cramcast_body p span:nth-child(1):after,._cramcast_body p span:nth-child(1):before{content:" ";display:block;position:absolute;right:2px;width:2px}._cramcast_body li span:nth-child(1):after,._cramcast_body p span:nth-child(1):after{top:0;height:100%;background-color:#600;z-index:9001}._cramcast_body li span:nth-child(1):before,._cramcast_body p span:nth-child(1):before{top:25%;height:50%;background-color:#fffdd0;z-index:9002}._cramcast_body li span:nth-child(2),._cramcast_body p span:nth-child(2){text-align:left}._cramcast_body li .ORP,._cramcast_body p .ORP{color:red;z-index:9003;position:relative}._cramcast_body ul{opacity:.4}._cramcast_body ul span:nth-child(2):first-letter{color:#400}._cramcast_body p{margin:0;font-size:2.5em}._cramcast_body:after{clear:both;display:block;content:" ";visibility:hidden;height:1px}#_cramcast_font_test{visibility:hidden;position:absolute;width:auto;height:auto}button[data-action="_cramcast_close"]{float:right}';p.innerHTML='<style type="text/css">'+m+'</style>						<div id="_cramcast_container"><div id="_cramcast_panel"><div class="_cramcast_bar"><button type="button" data-action="_cramcast_close">X</button><select class="_cramcast_wpm" name="_cramcast_wpm"></select><p class="_cramcast_wpm"></p></div><div class="_cramcast_body"><ul id="_cramcast_context_before"></ul><p id="_cramcast_content"></p><ul id="_cramcast_context_after"></ul></div><div class="_cramcast_bar"><button type="button" data-action="_cramcast_stop">#</button><button type="button" data-action="_cramcast_section_back">|&lt;</button><button type="button" data-action="_cramcast_glimpse_back">&lt;&lt;</button><button type="button" data-action="_cramcast_playpause">&gt;</button><button type="button" data-action="_cramcast_glimpse_forward">&gt;&gt;</button><button type="button" data-action="_cramcast_section_forward">&gt;|</button></div><div class="_cramcast_bar"><div class="_cramcast_progress" id="_cramcast_progress_section" data-section="0"><div class="_cramcast_progress_inner" style="width:0%"></div><p></p></div></div><div class="_cramcast_bar"><div class="_cramcast_progress" id="_cramcast_progress_total"><div class="_cramcast_progress_inner" style="width:0%"></div><p class="_cramcast_right"></p></div></div></div></div>',document.getElementsByTagName("body")[0].appendChild(p),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var u=400,h=!0,g=0,b=0,f=0,y=0,E=(new Date).getTime(),x=0,O=0,v={container:document.getElementById("_cramcast_container"),body:document.querySelector("._cramcast_body"),before:document.getElementById("_cramcast_context_before"),after:document.getElementById("_cramcast_context_after"),content:document.getElementById("_cramcast_content"),progress_section:document.getElementById("_cramcast_progress_section"),progress_section_inner:document.querySelector("#_cramcast_progress_section ._cramcast_progress_inner"),progress_section_text:document.querySelector("#_cramcast_progress_section p"),progress_total:document.getElementById("_cramcast_progress_total"),progress_total_inner:document.querySelector("#_cramcast_progress_total ._cramcast_progress_inner"),progress_total_text:document.querySelector("#_cramcast_progress_total p"),select_wpm:document.querySelector('select[name="_cramcast_wpm"]'),actual_wpm:document.querySelector("p._cramcast_wpm"),button_playpause:document.querySelector('button[data-action="_cramcast_playpause"]'),button_stop:document.querySelector('button[data-action="_cramcast_stop"]'),button_section_back:document.querySelector('button[data-action="_cramcast_section_back"]'),button_section_forward:document.querySelector('button[data-action="_cramcast_section_forward"]'),button_glimpse_back:document.querySelector('button[data-action="_cramcast_glimpse_back"]'),button_glimpse_forward:document.querySelector('button[data-action="_cramcast_glimpse_forward"]'),button_close:document.querySelector('button[data-action="_cramcast_close"]')},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",T=[];requestAnimFrame(n);for(var H=200;1500>=H;H+=50){var S=document.createElement("option");S.setAttribute("value",H),H==u&&S.setAttribute("selected","selected"),S.innerHTML=H+" WPM",v.select_wpm.appendChild(S)}v.select_wpm.addEventListener("change",function(t){u=t.target.options[t.target.selectedIndex].value,x=1,O=0}),v.progress_total.addEventListener("click",function(t){var e=Math.floor((t.x-this.getBoundingClientRect().left)/this.offsetWidth*_.length);b=0,g=e,o()}),v.button_playpause.addEventListener("click",function(){h?i():s()}),v.button_section_back.addEventListener("click",function(){10>b&&g>0&&g--,b=0,o()}),v.button_section_forward.addEventListener("click",function(){++g>=_.length?(g--,b=_[g].words.length-1,s()):b=0,o()}),v.button_glimpse_back.addEventListener("click",function(){10>b?b=g>0?_[--g].length-(10-b):0:b-=10,o()}),v.button_glimpse_forward.addEventListener("click",function(){b+10>=_[g].words.length?(b+=10-_[g].words.length,++g==_.length&&(g--,b=_[g].words.length-1,s())):b+=10,o()}),v.button_stop.addEventListener("click",function(){b=0,g=0,s(),o()}),v.button_close.addEventListener("click",function(){s(),v.container.style.display="none"}),v.container.addEventListener("click",function(t){t.target==this&&(s(),this.style.display="none")});for(var R=document.querySelectorAll("h1, h2, h3, h4, h5, p, ul, ol"),H=0;H<R.length;H++)R[H].addEventListener("click",function(){a(this),b=0,g=0,y=500,o(),i(),v.container.style.display="block"});a("h1, h2, h3, h4, h5, p, ul, ol"),b=0,g=0,y=1e3,o(),i(),v.container.style.display="block"}).call(this);